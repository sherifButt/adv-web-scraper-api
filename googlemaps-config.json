{
  "startUrl": "https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://maps.google.com/maps/%3Fentry%3Dwc&ved=2ahUKEwjex7WsrMqMAxXIWEEAHTaUAicQFnoECA4QAQ&usg=AOvVaw1G_vzTaDddqXWb9c6P7TKB",
  "steps": [
    {
      "type": "scroll",

      "distance": 500,
      
      "description": "Initial page scroll"
    },
    {
      "type": "condition",
      "condition": "button[aria-label='Accept all']",
      "description": "Check if consent dialog appears",
      "thenSteps": [
        {
          "type": "click",
          "selector": "button[aria-label='Accept all']",
          "description": "Accept cookies"
        }
      ]
    },
    {
      "type": "wait",
      "value": 3000,
      "description": "Wait for page to load"
    },
    {
      "type": "input",
      "selector": ".searchboxinput",
      "value": "{{keyword}} near {{postcode}}",
      "description": "Enter search query",
      "clearInput": true,
      "humanInput": true
    },
    {
      "type": "click",
      "selector": "#searchbox-searchbutton",
      "description": "Click search button"
    },
    {
      "type": "wait",
      "value": 1000,
      "description": "Wait for search results"
    },
   
    {
      "type": "mousemove",
      "selector": ".m6QErb[role='feed']",
      "duration": 1000,
      "action": "wheel",
      "deltaY": 500,
      "description": "Scroll results feed"
    },
    {
      "type": "mousemove",
      "selector": ".m6QErb[role='feed']",
      "duration": 500,
      "action": "wheel",
      "deltaY": 500,
      "description": "Scroll results feed"
    },
    {
      "type": "mousemove",
      "selector": ".m6QErb[role='feed']",
      "duration": 500,
      "action": "wheel",
      "deltaY": 500,
      "description": "Scroll results feed"
    },
    {
      "type": "mousemove",
      "selector": ".m6QErb[role='feed']",
      "duration": 500,
      "action": "wheel",
      "deltaY": 500,
      "description": "Scroll results feed"
    },
    {
      "type": "wait",
      "value": 3000,
      "description": "Wait for more results"
    },
    {
      "type": "extract",
      "name": "searchHTML",
      "selector": ".m6QErb[role='feed']",
      "description": "Extract the entire search results container",
      "source": "html"
    },
    {
      "type": "extract",
      "name": "barberShops",
      "selector": "div.Nv2PK",
      "description": "Extract listings",
      "multiple": true,
      "fields": {
        "name": {
          "selector": "div.fontHeadlineSmall",
          "type": "text",
          "optional": true
        },
        "rating": {
          "selector": "span[aria-label*='stars']",
          "type": "attribute",
          "attribute": "aria-label",
          "pattern": "(\\d+\\.\\d+) stars",
          "optional": true
        },
        "reviewCount": {
          "selector": "span[aria-label*='stars']",
          "type": "attribute",
          "attribute": "aria-label",
          "pattern": "stars (\\d+) reviews",
          "optional": true
        },
        "type": {
          "selector": "div.W4Efsd span:first-child",
          "type": "text",
          "optional": true
        },
        "address": {
          "selector": "div.W4Efsd span:nth-child(3)",
          "type": "text",
          "optional": true
        },
        "hours": {
          "selector": "div.W4Efsd div.W4Efsd span:first-child",
          "type": "text",
          "optional": true
        }
      }
    }
  ],
  "variables": {
    "keyword": "barber shop",
    "postcode": "CF40 2RS"
  },
  "options": {
    "timeout": 45000,
    "javascript": true,
    "screenshots": false,
    "screenshotsPath": "./screenshots",
    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",
    "debug": true
  }
}
