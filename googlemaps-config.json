{
  "startUrl": "https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://maps.google.com/maps/%3Fentry%3Dwc&ved=2ahUKEwjex7WsrMqMAxXIWEEAHTaUAicQFnoECA4QAQ&usg=AOvVaw1G_vzTaDddqXWb9c6P7TKB",
  "steps": [
    {
      "type": "scroll",
      "distance": 500,
      "description": "Initial page scroll"
    },
    {
      "type": "condition",
      "condition": "button[aria-label='Accept all']",
      "description": "Check if consent dialog appears",
      "thenSteps": [
        {
          "type": "click",
          "selector": "button[aria-label='Accept all']",
          "description": "Accept cookies"
        }
      ]
    },
    {
      "type": "wait",
      "value": 500,
      "description": "Wait for page to load"
    },
    {
      "type": "input",
      "selector": ".searchboxinput",
      "value": "{{keyword}} near {{postcode}}",
      "description": "Enter search query",
      "clearInput": true,
      "humanInput": true
    },
    {
      "type": "click",
      "selector": "#searchbox-searchbutton",
      "description": "Click search button"
    },
    {
      "type": "wait",
      "value": 1000,
      "description": "Wait for search results"
    },
    {
      "type": "mousemove",
      "selector": ".m6QErb[role='feed']",
      "duration": 4000,
      "action": "wheel",
      "deltaY": 6000,
      "description": "(1/5) Scroll results feed"
    },
   
   
    {
      "type": "wait",
      "value": 3000,
      "description": "Wait for more results"
    },
    {
      "type": "extract",
      "name": "searchHTML",
      "selector": ".m6QErb[role='feed']",
      "description": "Extract the entire search results container",
      "source": "html"
    },
    {
      "type": "extract",
      "name": "searchResults",
      "selector": ".m6QErb[role='feed']",
      "description": "Extract listings from the search results container",
      "fields": {
        "listings": {
          "selector": ".Nv2PK",
          "type": "css",
          "multiple": true,
          "continueOnError": true,
          "fields": {
            "name": {
              "selector": ".fontHeadlineSmall",
              "type": "css",
              "continueOnError": true
            },
            "name2": {
              "selector": "span .UY7F9",
              "type": "regex",
              "pattern": "\\((\\d+)\\)",
              "group": 1,
              "dataType": "number",
              "continueOnError": true
            }
          }
        }
      }
    }
  ],
  "variables": {
    "keyword": "architect",
    "postcode": "canton, cardiff,uk"
  },
  "options": {
    "timeout": 45000,
    "waitForSelector": ".m6QErb[role='feed']",
    "javascript": true,
    "screenshots": false,
    "screenshotsPath": "./screenshots",
    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",
    "debug": true
  }
}
